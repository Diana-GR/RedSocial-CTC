{% extends "index.html" %} {% block "content" %}
<h1>Detalles de la publicación</h1>
<div class="post">
  <p><strong>Publicado por:</strong> {{ post.usuario.username }}</p>
  <p>{{ post.contenido }}</p>
  <p><strong>Fecha:</strong> {{ post.fecha_publicacion }}</p>
  <p><strong>Likes:</strong> {{ post.likes.count }}</p>

  <h2>Comentarios</h2>
  {% if comentarios %}
  <ul>
    {% for comentario in comentarios %}
    <strong>{{ comentario.usuario.username }}:</strong>
    <p>{{ comentario.contenido }} ({{ comentario.fecha_comentario }})</p>
    <!-- Botón para dar like a la publicación (MODIFICAR) -->
    <form method="POST" action="{% url 'like_comment' comentario.id %}">
      {% csrf_token %}
      <button type="submit">
        {% if user in comentario.likes.all %} Quitar like {% else %} Like
        {%endif %} {% comment %} ({{ comentario.likes.count }}) es el (1) dentro
        del boton {% endcomment %}
      </button>
    </form>
    {% endfor %}
  </ul>
  {% else %}
  <p>No hay comentarios.</p>
  {% endif %}
</div>
{%endblock "content" %}
